#!/bin/bash
# Interactive mouse button tester for ROG SPATHA X

echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "  ROG SPATHA X Button Mapper"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "Click each button on your mouse ONE AT A TIME"
echo "I'll tell you which button NUMBER it is"
echo ""
echo "Testing for 30 seconds... (Ctrl+C to stop early)"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"

/usr/sbin/xinput test 12 2>&1 | while read line; do
    if [[ $line =~ button\ press\ \ \ ([0-9]+) ]]; then
        BTN="${BASH_REMATCH[1]}"
        case $BTN in
            1) echo "ğŸ–±ï¸  Button $BTN = LEFT CLICK (fire)" ;;
            2) echo "ğŸ–±ï¸  Button $BTN = MIDDLE CLICK (scroll wheel)" ;;
            3) echo "ğŸ–±ï¸  Button $BTN = RIGHT CLICK (aim)" ;;
            4) echo "ğŸ”„  Button $BTN = SCROLL UP" ;;
            5) echo "ğŸ”„  Button $BTN = SCROLL DOWN" ;;
            6) echo "â¬…ï¸  Button $BTN = SIDE BUTTON (probably back)" ;;
            7) echo "â¡ï¸  Button $BTN = SIDE BUTTON (probably forward)" ;;
            8) echo "ğŸ®  Button $BTN = EXTRA BUTTON (programmable)" ;;
            9) echo "ğŸ®  Button $BTN = EXTRA BUTTON (programmable)" ;;
            10) echo "ğŸ®  Button $BTN = EXTRA BUTTON (programmable)" ;;
            11) echo "ğŸ®  Button $BTN = EXTRA BUTTON (programmable)" ;;
            12) echo "ğŸ®  Button $BTN = EXTRA BUTTON (programmable)" ;;
            13) echo "ğŸ®  Button $BTN = EXTRA BUTTON (programmable)" ;;
            14) echo "ğŸ®  Button $BTN = EXTRA BUTTON (programmable)" ;;
            *) echo "ğŸ”  Button $BTN = Unknown button" ;;
        esac
    fi
done
